---
title: Phoenix with Elm - part 11
author: Alan Gardner
description: Introducing Phoenix channels
---

<section class="callout">
  I gave [a talk at ElixirConf 2015](http://confreaks.tv/videos/elixirconf2015-phoenix-with-elm) on combining the [Phoenix web framework](http://www.phoenixframework.org/) with the [Elm programming language](http://elm-lang.org). This is the tutorial that was referred to in that talk.

  The tutorial walks through the creation of a very basic seat saving application, like one you'd use when booking a flight for example. The application will do just enough to demonstrate the mechanisms for getting the two technologies talking to each other.

  There is an [accompanying repo](https://github.com/CultivateHQ/seat_saver) for this tutorial. Each of the numbered steps has an associated commit so that you can just look at the diffs if you'd rather not read through the whole thing.
</section>

## Notes

1. `mix phoenix.gen.channel Seat seats`
2. Update *web/channels/user_socket.ex*

    ```elixir
    defmodule SeatSaver.UserSocket do
      use Phoenix.Socket

      ## Channels
      # channel "rooms:*", SeatSaver.RoomChannel
      channel "seats:planner", SeatSaver.SeatChannel

      ...
    end
    ```

3. Update *web/channels/seat_channel.ex*

    ```elixir
    defmodule SeatSaver.SeatChannel do
      use SeatSaver.Web, :channel

      def join("seats:planner", payload, socket) do
        ...
      end

      ...
    end
    ```

4. Update *test/channels/seat_channel_test.exs*

    ```elixir
    defmodule SeatSaver.SeatChannelTest do
      ...

      setup do
        {:ok, _, socket} =
          socket("user_id", %{some: :assign})
          |> subscribe_and_join(SeatChannel, "seats:planner")

       ...
      end

      ...

      test "shout broadcasts to seats:planner", %{socket: socket} do
        ...
      end

      ...
    end
    ```

5. `mix test`
6. Update *web/static/js/socket.js*

    ```javascript
    ...

    socket.connect()

    // Now that you are connected, you can join channels with a topic:
    let channel = socket.channel("seats:planner", {})

    ...
    ```

7. Update *web/static/js/app.js*

    ```javascript
    import socket from "./socket"
    ```

8. Visit <http://localhost:4000> and check the console.

    ![Channel connected](/images/phoenix-elm/15.png)

## Summary

We're now fetching the initial seat data using channels rather then traditional HTTP request/response. start to use Phoenix's Channels to get our data (as previously promised) in part 11, which should be out soon.

We'll be announcing the rest of the tutorial on Twitter ([@cultivatehq](https://twitter.com/cultivatehq) using hashtag [#phoenixelm](https://twitter.com/hashtag/phoenixelm?src=hash)), so keep an eye out for updates!

