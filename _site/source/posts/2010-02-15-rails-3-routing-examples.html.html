<blockquote>
  <p>This post was written prior to Rails 3 being released and may contain information that is now out of date.</p>
</blockquote>

<p>Rails 3 introduced a new routing DSL that is a little bit different from the Rails 2 version. This quick guide covers a few examples of the new routes, and how they compare to Rails 2.</p>

<h2 id="simple-routes">Simple routes</h2>

<p>Create a basic route that will respond to <code>http://localhost:300/hello_world</code></p>

<p>```ruby
# Rails 2:
map.connect ‘hello_world’, :controller =&gt; ‘posts’, :action =&gt; ‘index’</p>

<h1 id="rails-3">Rails 3:</h1>
<p>match ‘hello_world’ =&gt; ‘posts#index’
```</p>

<h2 id="resources">Resources</h2>

<p>A <code>UsersController</code> that responds to the typical RESTful actions <code>/users</code>, <code>/users/123</code>, <code>/users/123/edit</code> etc.</p>

<p>```ruby
# Rails 2:
map.resources :users</p>

<h1 id="rails-3-1">Rails 3:</h1>
<p>resources :users
```</p>

<p>Add additional <code>member</code> and <code>collection</code> actions to a resource. For a <code>GamesController</code>, adding a download action on a particular game (member) and a favourites action to display a list of favourite games (collection):</p>

<p>```ruby
# Rails 2
map.resources :games, :member =&gt; { :download =&gt; :get }, :collection =&gt; { :favourites =&gt; :get }</p>

<h1 id="rails-3-2">Rails 3</h1>
<p>resources :games do
  get :download,   :on =&gt; :member
  get :favourites, :on =&gt; :collection
end
```</p>

<p><code>member</code>/<code>collection</code> blocks are also available as an alternative to the above:</p>

<p>```ruby
# Rails 3
resources :games do
  member do
    get :download
  end</p>

<p>collection do
    get :favourites
  end
end
```</p>

<h2 id="root-mappings">Root mappings</h2>
<p>The <code>root_url</code> your app points to eg. <code>http://localhost:3000/</code></p>

<p>```ruby
# Rails 2
map.root :controller =&gt; ‘posts’, :action =&gt; ‘index’</p>

<h1 id="rails-3-3">Rails 3</h1>
<p>root :to =&gt; ‘posts#index’
```</p>

<p>Namespaced root mappings eg. <code>http://localhost:3000/admin</code></p>

<p>```ruby
# Rails 2
map.namespace :admin do |admin|
  admin.root :controller =&gt; ‘posts’
end</p>

<h1 id="rails-3-4">Rails 3</h1>
<p>namespace :admin do
  root :to =&gt; “admin/posts#index”
end
```</p>

<p>One thing to note is that if you are defining a root mapping in a namespace, it doesn’t make any assumptions that the controller is in the same namespace in Rails 3.</p>

<h2 id="optional-params">Optional params</h2>
<p>Allows a mapping to be associated with multiple routes eg: <code>/posts/2010</code> and <code>/posts/2010/02</code></p>

<p>```ruby
# Rails 2
map.connect ‘posts/:year/:month’, :controller =&gt; ‘posts’,
            :month =&gt; nil, :requirements =&gt; { :year =&gt; /\d{4}/ }</p>

<h1 id="rails-3-5">Rails 3</h1>
<p>match ‘posts/:year(/:month)’ =&gt; ‘posts#index’, :constraints =&gt; { :year =&gt; /\d{4}/ }
```</p>

<p>You’ll notice that this mapping also makes use of the :constraints option rather than :requirements which would be found in a Rails 2 app.</p>
